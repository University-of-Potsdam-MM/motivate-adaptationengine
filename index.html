<!DOCTYPE html>
<html>
    <head>
        <title>MOTIVATE Adaptation Engine</title>
        <script type="text/javascript" src="scripts/lib/require.js"></script>
        <script type="text/javascript">
            require(['scripts/config'], function() {
                require(['jquery', 'nools', 'MoRE', 'MoAE'], function($, nools, RuleEngine, AdaptationEngine) {
                    console.log("ready to rumble!");
                    $.ajax({
                        url: "noolsDSLOutput.nools",
                        success: function(noolsDSL) {
                            var adaptationEngine = new AdaptationEngine(noolsDSL, true);
                            adaptationEngine.setRestrictFeatureCallback(function(feature, contextInformation) {
                                console.log("<restrict feature='"+feature+"'>");
                                for(var index in contextInformation) {
                                    console.log("\t"+contextInformation[index].description());
                                }
                                console.log("</restrict>");
                            });
                            adaptationEngine.setSelectLearningUnitCallback(function(id, contextInformation) {
                                console.log("<select id='"+id+"'>");
                                for(var index in contextInformation) {
                                    console.log("\t"+contextInformation[index].description());
                                }
                                console.log("</select>");
                            });
                            adaptationEngine.setPreloadLearningUnitCallback(function(id, contextInformation) {
                                console.log("<preload id='"+id+"'>");
                                for(var index in contextInformation) {
                                    console.log("\t"+contextInformation[index].description());
                                }
                                console.log("</preload>");
                            });
                            adaptationEngine.startRuleMatching();
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
    </body>
</html>