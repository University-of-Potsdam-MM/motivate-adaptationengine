<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: AdaptationEngine.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"MOTIVATE Adaptation Engine","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">MOTIVATE Adaptation Engine</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="AdaptationEngine">
            <span class="title">
                <a href="AdaptationEngine.html">AdaptationEngine</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="AdaptationEngine#isRunning"><a href="AdaptationEngine.html#isRunning">isRunning</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            <span class="subtitle">Typedefs</span>
            
                <li data-name="AdaptationEngine~preloadLearningUnitCallback"><a href="AdaptationEngine.html#preloadLearningUnitCallback">preloadLearningUnitCallback</a></li>
            
                <li data-name="AdaptationEngine~restrictFeatureCallback"><a href="AdaptationEngine.html#restrictFeatureCallback">restrictFeatureCallback</a></li>
            
                <li data-name="AdaptationEngine~ruleMatchingErrorCallback"><a href="AdaptationEngine.html#ruleMatchingErrorCallback">ruleMatchingErrorCallback</a></li>
            
                <li data-name="AdaptationEngine~ruleMatchingSuccessCallback"><a href="AdaptationEngine.html#ruleMatchingSuccessCallback">ruleMatchingSuccessCallback</a></li>
            
                <li data-name="AdaptationEngine~selectLearningUnitCallback"><a href="AdaptationEngine.html#selectLearningUnitCallback">selectLearningUnitCallback</a></li>
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AdaptationEngine#restartRuleMatching"><a href="AdaptationEngine.html#restartRuleMatching">restartRuleMatching</a></li>
            
                <li data-name="AdaptationEngine#setPreloadLearningUnitCallback"><a href="AdaptationEngine.html#setPreloadLearningUnitCallback">setPreloadLearningUnitCallback</a></li>
            
                <li data-name="AdaptationEngine#setRestrictFeatureCallback"><a href="AdaptationEngine.html#setRestrictFeatureCallback">setRestrictFeatureCallback</a></li>
            
                <li data-name="AdaptationEngine#setRuleMatchingErrorCallback"><a href="AdaptationEngine.html#setRuleMatchingErrorCallback">setRuleMatchingErrorCallback</a></li>
            
                <li data-name="AdaptationEngine#setRuleMatchingSuccessCallback"><a href="AdaptationEngine.html#setRuleMatchingSuccessCallback">setRuleMatchingSuccessCallback</a></li>
            
                <li data-name="AdaptationEngine#setSelectLearningUnitCallback"><a href="AdaptationEngine.html#setSelectLearningUnitCallback">setSelectLearningUnitCallback</a></li>
            
                <li data-name="AdaptationEngine#startRuleMatching"><a href="AdaptationEngine.html#startRuleMatching">startRuleMatching</a></li>
            
                <li data-name="AdaptationEngine#stopRuleMatching"><a href="AdaptationEngine.html#stopRuleMatching">stopRuleMatching</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ContextDetector">
            <span class="title">
                <a href="ContextDetector.html">ContextDetector</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ContextDetector#addContextInformation"><a href="ContextDetector.html#addContextInformation">addContextInformation</a></li>
            
                <li data-name="ContextDetector#contextInformationExists"><a href="ContextDetector.html#contextInformationExists">contextInformationExists</a></li>
            
                <li data-name="ContextDetector#getContextInformation"><a href="ContextDetector.html#getContextInformation">getContextInformation</a></li>
            
                <li data-name="ContextDetector#setCallback"><a href="ContextDetector.html#setCallback">setCallback</a></li>
            
                <li data-name="ContextDetector#updateContextInformation"><a href="ContextDetector.html#updateContextInformation">updateContextInformation</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ContextInformation">
            <span class="title">
                <a href="ContextInformation.html">ContextInformation</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ContextInformation.fromFact"><a href="ContextInformation.html#fromFact">fromFact</a></li>
            
                <li data-name="ContextInformation#description"><a href="ContextInformation.html#description">description</a></li>
            
                <li data-name="ContextInformation#equals"><a href="ContextInformation.html#equals">equals</a></li>
            
                <li data-name="ContextInformation#getID"><a href="ContextInformation.html#getID">getID</a></li>
            
                <li data-name="ContextInformation#getParameter"><a href="ContextInformation.html#getParameter">getParameter</a></li>
            
                <li data-name="ContextInformation#getParameterValue"><a href="ContextInformation.html#getParameterValue">getParameterValue</a></li>
            
                <li data-name="ContextInformation#getValue"><a href="ContextInformation.html#getValue">getValue</a></li>
            
                <li data-name="ContextInformation#setID"><a href="ContextInformation.html#setID">setID</a></li>
            
                <li data-name="ContextInformation#setParameters"><a href="ContextInformation.html#setParameters">setParameters</a></li>
            
                <li data-name="ContextInformation#setParameterValue"><a href="ContextInformation.html#setParameterValue">setParameterValue</a></li>
            
                <li data-name="ContextInformation#setValue"><a href="ContextInformation.html#setValue">setValue</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="RuleEngine">
            <span class="title">
                <a href="RuleEngine.html">RuleEngine</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="RuleEngine#addContextInformation"><a href="RuleEngine.html#addContextInformation">addContextInformation</a></li>
            
                <li data-name="RuleEngine#getDefined"><a href="RuleEngine.html#getDefined">getDefined</a></li>
            
                <li data-name="RuleEngine#getRules"><a href="RuleEngine.html#getRules">getRules</a></li>
            
                <li data-name="RuleEngine#matchRules"><a href="RuleEngine.html#matchRules">matchRules</a></li>
            
                <li data-name="RuleEngine#setCallback"><a href="RuleEngine.html#setCallback">setCallback</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="AdaptationEngine.js.html">Source: AdaptationEngine.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>define('MoAE', ['easejs', 'MoRE', 'MoCD'], function (easejs, RuleEngine, ContextDetector) {
    var Class = easejs.Class;

    var AdaptationEngine = Class('AdaptationEngine',
        {
            /**
             * @private
             * @type {?object}
             */
            'private _ruleEngine': null,
            'private _contextDetector': null,
            'private _noolsDSL': null,
            'private _ruleMatchingInterval': null,

            /**
             * Indicates whether the rule matching process is running.
             * @alias isRunning
             * @memberof AdaptationEngine#
             * @type {boolean}
             * @default false
             */
            'public isRunning': false,

            /**
             * The adaptation engine encapsulates the rule engine and the context detection. Via callbacks an application
             * can listen to events fired by the rule engine during the rule evaluation process and react to the triggered rules.
             *
             * The adaptation engine and it's components require the following external libraries:
             *
             * - jQuery
             * - nools.js & its constraint parser (lib/parser/constraint/parser.js)
             * - require.js
             * - ease.js
             * @class
             * @constructs AdaptationEngine
             * @param {String} noolsDSL The adaptation rules as nools DSL format.
             * @example
             * $.ajax({
             *     url: "www.domain.com/pathToRuleGenerator?params",
             *     success: function(noolsDSL) {
             *         var adaptationEngine = new AdaptationEngine(noolsDSL);
             *     }
             * });
             */
            __construct: function(noolsDSL)
            {
                this._noolsDSL = noolsDSL;
                this._ruleEngine = new RuleEngine(noolsDSL);
                // for test purposes
                FlowContextInformation = this._ruleEngine.getDefined("ContextInformation");
                this._ruleEngine.addContextInformation(new FlowContextInformation("CurrentTemperatureMeasurableInformation", 55, {"TemperatureScaleContextParameter" : "FAHRENHEIT"}));
                // initialize context detector and set callbacks for context information gathering
                this._contextDetector = new ContextDetector(this._ruleEngine.getRules());
            },

            /**
             * Sets a callback function to be executed when a feature restricting rule fires.
             * @alias setRestrictFeatureCallback
             * @memberof AdaptationEngine#
             * @param {AdaptationEngine~restrictFeatureCallback} callback The function that handles the callback.
             */
            'public setRestrictFeatureCallback': function(callback) {
                /**
                 * The callback returns with a string containing the feature to be restricted and an array of context
                 * information that triggered the rule.
                 * @callback AdaptationEngine~restrictFeatureCallback
                 * @param {string} feature The feature to be restricted.
                 * @param {Array.&lt;ContextInformation>} contextInformation An array of context information that triggered the rule.
                 * @example
                 * adaptationEngine.setRestrictFeatureCallback(function(feature, contextInformation) {
                 *     console.log("Restrict Feature -> "+feature); // Restrict Feature -> AppUsageFeature
                 *     for(var index in contextInformation) {
                 *         console.log(contextInformation[index].description()); // see {@link ContextInformation#description}
                 *     }
                 * });
                 */
                this._ruleEngine.setCallback("restrictFeatureCallback", callback);
            },

            /**
             * Sets a callback function to be executed when a learning unit selection rule fires.
             * @alias setSelectLearningUnitCallback
             * @memberof AdaptationEngine#
             * @param callback {AdaptationEngine~selectLearningUnitCallback} The function that handles the callback.
             */
            'public setSelectLearningUnitCallback': function(callback) {
                /**
                 * The callback returns with a string containing the ID of the learning unit to be selected and an array
                 * of context information that triggered the rule.
                 * @callback AdaptationEngine~selectLearningUnitCallback
                 * @param {String} id The id of the learning unit to be selected.
                 * @param {Array.&lt;ContextInformation>} contextInformation An array of context information that triggered the rule.
                 * @example
                 * adaptationEngine.setSelectLearningUnitCallback(function(id, contextInformation) {
                 *     console.log("Select Learning Unit -> "+id);
                 *     for(var index in contextInformation) {
                 *         console.log(contextInformation[index].description());  // see {@link ContextInformation#description}
                 *     }
                 * });
                 */
                this._ruleEngine.setCallback("selectLearningUnitCallback", callback);
            },

            /**
             * Sets a callback function to be executed when a preload learning unit rule fires.
             * @alias setPreloadLearningUnitCallback
             * @memberof AdaptationEngine#
             * @param callback {AdaptationEngine~preloadLearningUnitCallback} The function that handles the callback.
             */
            'public setPreloadLearningUnitCallback': function(callback) {
                /**
                 * The callback returns with a string containing the ID of the learning unit to be preloaded.
                 * @callback AdaptationEngine~preloadLearningUnitCallback
                 * @param {String} id The id of the learning unit to be preloaded.
                 * @example
                 * adaptationEngine.setPreloadLearningUnitCallback(function(id) {
                 *     console.log("Preload Learning Unit -> "+id);
                 * });
                 */
                this._ruleEngine.setCallback("preloadLearningUnitCallback", callback);
            },

            /**
             * Sets a callback function that is executed every time the rule matching was executed successfully.
             * @alias setRuleMatchingSuccessCallback
             * @memberof AdaptationEngine#
             * @param callback {AdaptationEngine~ruleMatchingSuccessCallback} The function that handles the callback.
             */
            'public setRuleMatchingSuccessCallback': function(callback) {
                /**
                 * The callback returns when the rule matching process was executed successfully.
                 * @callback AdaptationEngine~ruleMatchingSuccessCallback
                 * @example
                 * adaptationEngine.setRuleMatchingSuccessCallback(function() {
                 *     console.log("Rule matching was executed successfully.");
                 * });
                 */
                this._ruleEngine.setCallback("ruleMatchingSuccessCallback", callback);
            },

            /**
             * Sets a callback function that is executed when the rule matching produced an error.
             * @alias setRuleMatchingErrorCallback
             * @memberof AdaptationEngine#
             * @param callback {AdaptationEngine~ruleMatchingErrorCallback} The function that handles the callback.
             */
            'public setRuleMatchingErrorCallback': function(callback) {
                /**
                 * The callback returns with an object containing further information about the error that occurred.
                 * @callback AdaptationEngine~ruleMatchingErrorCallback
                 * @param error {object} Further information about the error.
                 * @example
                 * adaptationEngine.setRuleMatchingErrorCallback(function(error) {
                 *     console.error(error.stack);
                 * });
                 */
                this._ruleEngine.setCallback("ruleMatchingErrorCallback", callback);
            },

            /**
             * Starts the rule matching process. If an integer values is provided the rule matching process will repeat
             * every x milliseconds until it is halted manually by executing {@link AdaptationEngine#stopRuleMatching}.
             * @alias startRuleMatching
             * @memberof AdaptationEngine#
             * @param intervalInMilliseconds {number} The time in milliseconds between every rule matching interval.
             */
            'public startRuleMatching': function(intervalInMilliseconds) {
                var that = this;

                if (!this.isRunning) {
                    this.isRunning = false;
                    this._ruleEngine.matchRules();
                    if (!isNaN(intervalInMilliseconds)) {
                        this._ruleMatchingInterval = setInterval(function(){that._ruleEngine.matchRules()}, intervalInMilliseconds);
                    }
                }
            },

            /**
             * Stops the rule matching process. If rules are currently executed the process will halt afterwards.
             * @alias stopRuleMatching
             * @memberof AdaptationEngine#
             */
            'public stopRuleMatching': function() {
                if (this.isRunning) {
                    this.isRunning = false;
                    clearInterval(this._ruleMatchingInterval);
                }
            },

            /**
             * Restarts the rule matching process (i.e. executes {@link AdaptationEngine#stopRuleMatching} and
             * {@link AdaptationEngine#startRuleMatching} successively). If an integer value is provided a new
             * interval will be set.
             * @alias restartRuleMatching
             * @memberof AdaptationEngine#
             * @param intervalInMilliseconds {number}
             */
            'public restartRuleMatching': function(intervalInMilliseconds) {
                this.stopRuleMatching();
                this.startRuleMatching(intervalInMilliseconds);
            }
        }
    );

    return AdaptationEngine;
});
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Tue Oct 21 2014 14:18:37 GMT+0200 (MESZ)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
